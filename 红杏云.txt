# Profile Enhancement Merge Template for Clash Verge

dns:
  enable: true       # ä¸ä½¿ç”¨ç³»ç»Ÿ DNS
  ipv6: false        # å…³é—­ IPV6
  listen: 0.0.0.0:53 # dns ç›‘å¬
  use-hosts: true
  use-system-hosts: true 
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - '*.lan'
    - '*.local'
    - '*.localhost'
    - '*.localdomain'
    - '*.msftconnecttest.com'
    - '*.msftncsi.com'
    - 'time.*.*'
    - 'stun.*.*'
  default-nameserver:
    - system
  nameserver:        # é»˜è®¤ DNS æœåŠ¡
    - 'quic://dns.alidns.com:853'
    - 'https://dns.alidns.com/dns-query'    
    - 'https://doh.pub/dns-query'
  fallback:          # å›½å¤– DNS æœåŠ¡å™¨
    - "https://dns.cloudflare.com/dns-query" # Cloudflare
    - "https://dns.google/dns-query" # è°·æ­ŒDNS
    - "https://doh.opendns.com/dns-query" # OpenDNS
    - "https://dns.quad9.net/dns-query" # Quad9 DNS
  prefer-h3: true  # å¯ç”¨HTTP/3åè®®
  proxy-server-nameserver: 
    - 'https://dns.alidns.com/dns-query'    
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4

# ç­–ç•¥ç»„å¼•ç”¨
pr:   &a3 {type: select,   proxies: [â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, DIRECT] }
p:    &a1 {type: http,     interval: 86400,  health-check: {enable: true, url: http://www.gstatic.com/generate_204, interval: 1800} }
auto: &a4 {type: url-test, lazy: true,  url: http://www.gstatic.com/generate_204, interval: 180, use: [Sub1] }
use:  &a2 {type: select,   use: [Sub1] ,filter: "ç§»åŠ¨IEPL"}

proxy-providers:
  Sub1:
    <<: *a1
    url: https://hongxingyun10.vip/hxyunvip?token=a40621f16cd8564839a942a6146a880b
    # URLåé¢å¡«å†™æ ¼å¼: ç›´æ¥å¡«å†™ä½ çš„æœºåœºClashè®¢é˜…[æ¨èæ­¤ç§æ–¹å¼ï¼Œé¿å…è®¢é˜…æ³„éœ²]
    path: ./proxy_providers/Sub1.yaml
# URLåé¢å¡«å†™æ ¼å¼[é›†åˆè®¢é˜…]ï¼šhttps://api.nexconvert.com/sub?target=clash&url=è¯·æ‰‹åŠ¨å¡«å…¥ä½ çš„è®¢é˜…(å¤šæœºåœºè®¢é˜…ç”¨|åˆ†å‰²å³å¯)&emoji=true&list=true&new_name=true&udp=false

proxies: []
proxy-groups:
#åˆ†æµåˆ†ç»„
  - {name: ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, <<: *a2}
  - {name: ğŸŒ å…¨çƒåŠ é€Ÿ, <<: *a3}
  - {name: ğŸ¤– OpenAi,   type: select, proxies: [ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹]}
#èŠ‚ç‚¹åˆ†ç»„
  - {name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©, <<: *a4,  filter: "ç§»åŠ¨IEPL"}
  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, <<: *a4,  filter: "(?=.*é¦™æ¸¯)(?=.*ç§»åŠ¨IEPL)"       }             # a4æ›´æ”¹ä¸ºa2ï¼Œå³ä¸ºæ‰‹åŠ¨é€‰æ‹©
  - {name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, <<: *a4,  filter: "(?=.*æ—¥æœ¬)(?=.*ç§»åŠ¨IEPL)"       }             # a4æ›´æ”¹ä¸ºa2ï¼Œå³ä¸ºæ‰‹åŠ¨é€‰æ‹©     
  - {name: ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, <<: *a2,  filter: "(?=.*å°æ¹¾)(?=.*ç§»åŠ¨IEPL)"       }             # a4æ›´æ”¹ä¸ºa2ï¼Œå³ä¸ºæ‰‹åŠ¨é€‰æ‹©
  - {name: ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, <<: *a4,  filter: "(?=.*ç¾å›½)(?=.*ç§»åŠ¨IEPL)"       }             # a4æ›´æ”¹ä¸ºa2ï¼Œå³ä¸ºæ‰‹åŠ¨é€‰æ‹©
  - {name: ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, <<: *a4,  filter: "(?=.*æ–°åŠ å¡)(?=.*ç§»åŠ¨IEPL)"     }             # a4æ›´æ”¹ä¸ºa2ï¼Œå³ä¸ºæ‰‹åŠ¨é€‰æ‹©

rule-providers:
  reject:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt"
    path: ./ruleset/reject.yaml
    interval: 86400

  icloud:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt"
    path: ./ruleset/icloud.yaml
    interval: 86400

  apple:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt"
    path: ./ruleset/apple.yaml
    interval: 86400

  google:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt"
    path: ./ruleset/google.yaml
    interval: 86400

  proxy:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt"
    path: ./ruleset/proxy.yaml
    interval: 86400

  direct:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt"
    path: ./ruleset/direct.yaml
    interval: 86400

  private:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt"
    path: ./ruleset/private.yaml
    interval: 86400

  gfw:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt"
    path: ./ruleset/gfw.yaml
    interval: 86400

  tld-not-cn:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt"
    path: ./ruleset/tld-not-cn.yaml
    interval: 86400

  telegramcidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt"
    path: ./ruleset/telegramcidr.yaml
    interval: 86400

  cncidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt"
    path: ./ruleset/cncidr.yaml
    interval: 86400

  lancidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt"
    path: ./ruleset/lancidr.yaml
    interval: 86400

  applications:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt"
    path: ./ruleset/applications.yaml
    interval: 86400

  OpenAi:
    type: http
    behavior: classical
    url: "https://gist.githubusercontent.com/ddgksf2013/cb4121e8b5c5d865cc949cb8120320c4/raw/Ai.yaml"
    path: ./ruleset/OpenAi.yaml
    interval: 86400

rules:
  # ç›´è¿ç§æœ‰ç½‘ç»œã€æ§åˆ¶é¢æ¿åŠç‰¹å®šæœåŠ¡
  - RULE-SET,applications,DIRECT
  - DOMAIN,clash.razord.top,DIRECT
  - DOMAIN,yacd.haishan.me,DIRECT
  - RULE-SET,private,DIRECT
  # ä¼˜å…ˆæ‹’ç»å¹¿å‘Šã€æ¶æ„åŸŸåç­‰é«˜é£é™©è¯·æ±‚
 # - RULE-SET,reject,REJECT
  - RULE-SET,icloud,DIRECT
  - RULE-SET,apple,DIRECT
  - PROCESS-NAME,Cherry Studio.exe,ğŸ¤– OpenAi
  - PROCESS-NAME,ai-agent.exe,ğŸ¤– OpenAi
  - RULE-SET,OpenAi,ğŸ¤– OpenAi
  - RULE-SET,google,ğŸŒ å…¨çƒåŠ é€Ÿ
  - RULE-SET,proxy,ğŸŒ å…¨çƒåŠ é€Ÿ
  - RULE-SET,direct,DIRECT
  - RULE-SET,lancidr,DIRECT
  - RULE-SET,cncidr,DIRECT
  - RULE-SET,telegramcidr,ğŸŒ å…¨çƒåŠ é€Ÿ
  - GEOIP,LAN,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,ğŸŒ å…¨çƒåŠ é€Ÿ